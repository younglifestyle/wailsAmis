"use strict";(self.webpackChunktestAmis=self.webpackChunktestAmis||[]).push([[802],{10802:function(e,t,n){n.r(t),n.d(t,{Audio:function(){return p},AudioRenderer:function(){return l}});var o=n(31635),a=n(96540),i=n(55808),s=n.n(i),r=n(8096),u=n(65408),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={src:(0,r.$_G)(t.props,(function(e){return e.src?(0,r.pbD)(e.src,e.data,"| raw"):void 0}))||"",isReady:!1,muted:!1,playing:!1,played:0,seeking:!1,volume:.8,prevVolume:.8,loaded:0,playbackRate:1,showHandlePlaybackRate:!1,showHandleVolume:!1},t}return(0,o.C6)(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationTimeout)},t.prototype.componentDidMount=function(){var e=!!this.props.autoPlay;this.setState({playing:e},this.progress)},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props;(0,r.gTD)(n,e,(function(e){return t.setState({src:e,playing:!1},(function(){t.audio.load(),t.progress()}))}),(function(e){return e.src?(0,r.pbD)(e.src,e.data,"| raw"):void 0}))},t.prototype.progress=function(){if(clearTimeout(this.progressTimeout),this.state.src&&this.audio){var e=(this.audio.currentTime||0)/this.audio.duration,t=this.state.playing;t=!(1==e||!t),this.setState({played:e,playing:t}),this.progressTimeout=setTimeout(this.progress,this.props.progressInterval/this.state.playbackRate)}},t.prototype.audioRef=function(e){this.audio=e},t.prototype.load=function(){this.setState({isReady:!0})},t.prototype.handlePlaybackRate=function(e){this.audio.playbackRate=e,this.setState({playbackRate:e,showHandlePlaybackRate:!1})},t.prototype.handleMute=function(){if(this.state.src){var e=this.state,t=e.muted,n=e.prevVolume,o=t?n:0;this.audio.muted=!t,this.setState({muted:!t,volume:o})}},t.prototype.handlePlaying=function(){if(this.state.src){var e=this.state.playing;e?this.audio.pause():this.audio.play(),this.setState({playing:!e})}},t.prototype.getCurrentTime=function(){if(!this.audio||!this.state.src||!this.state.isReady)return"0:00";var e=this.audio.duration,t=this.state.played;return this.formatTime(e*(t||0))},t.prototype.getDuration=function(){if(!this.audio||!this.state.src)return"0:00";if(!this.state.isReady)return this.onDurationCheck(),"0:00";var e=this.audio,t=e.duration,n=e.seekable;return t===1/0&&n.length>0?n.end(n.length-1):this.formatTime(t)},t.prototype.onDurationCheck=function(){clearTimeout(this.durationTimeout),this.audio&&this.audio.duration||(this.durationTimeout=setTimeout(this.onDurationCheck,500))},t.prototype.onSeekChange=function(e){if(this.state.src){var t=e.target.value;this.setState({played:t})}},t.prototype.onSeekMouseDown=function(){this.setState({seeking:!0})},t.prototype.onSeekMouseUp=function(e){if(this.state.src&&this.state.seeking){var t=e.target.value,n=this.audio.duration;this.audio.currentTime=n*t;var o=this.props.loop,a=this.state.playing;a=!!(t<1||o)&&a,this.setState({playing:a,seeking:!1})}},t.prototype.setVolume=function(e){if(this.state.src){var t=e.target.value;this.audio.volume=t,this.setState({volume:t,prevVolume:t})}},t.prototype.formatTime=function(e){var t=new Date(1e3*e),n=t.getUTCHours(),o=isNaN(t.getUTCMinutes())?0:t.getUTCMinutes(),a=isNaN(t.getUTCSeconds())?"00":this.pad(t.getUTCSeconds());return n?"".concat(n,":").concat(this.pad(o),":").concat(a):"".concat(o,":").concat(a)},t.prototype.pad=function(e){return("0"+e).slice(-2)},t.prototype.toggleHandlePlaybackRate=function(){this.state.src&&this.setState({showHandlePlaybackRate:!this.state.showHandlePlaybackRate})},t.prototype.toggleHandleVolume=function(e){this.state.src&&this.setState({showHandleVolume:e})},t.prototype.renderRates=function(){var e=this,t=this.props,n=t.rates,o=t.classnames,i=this.state,s=i.showHandlePlaybackRate,r=i.playbackRate;return n&&n.length?s?a.createElement("div",{className:o("Audio-rateControl")},n.map((function(t,n){return a.createElement("div",{key:n,className:o("Audio-rateControlItem"),onClick:function(){return e.handlePlaybackRate(t)}},"x",t.toFixed(1))}))):a.createElement("div",{className:o("Audio-rates"),onClick:this.toggleHandlePlaybackRate},"x",r.toFixed(1)):null},t.prototype.renderPlay=function(){var e=this.props.classnames,t=this.state.playing;return a.createElement("div",{className:e("Audio-play"),onClick:this.handlePlaying},t?a.createElement(u.In,{icon:"pause",className:"icon"}):a.createElement(u.In,{icon:"play",className:"icon"}))},t.prototype.renderTime=function(){var e=this.props.classnames;return a.createElement("div",{className:e("Audio-times")},this.getCurrentTime()," / ",this.getDuration())},t.prototype.renderProcess=function(){var e=this.props.classnames,t=this.state.played;return a.createElement("div",{className:e("Audio-process")},a.createElement("input",{type:"range",min:0,max:1,step:"any",value:t||0,onMouseDown:this.onSeekMouseDown,onChange:this.onSeekChange,onMouseUp:this.onSeekMouseUp}))},t.prototype.renderVolume=function(){var e=this,t=this.props.classnames,n=this.state,o=n.volume;return n.showHandleVolume?a.createElement("div",{className:t("Audio-volumeControl"),onMouseLeave:function(){return e.toggleHandleVolume(!1)}},a.createElement("div",{className:t("Audio-volumeControlIcon"),onClick:this.handleMute},o>0?a.createElement(u.In,{icon:"volume",className:"icon"}):a.createElement(u.In,{icon:"mute",className:"icon"})),a.createElement("input",{type:"range",min:0,max:1,step:"any",value:o,onChange:this.setVolume})):a.createElement("div",{className:t("Audio-volume"),onMouseEnter:function(){return e.toggleHandleVolume(!0)}},o>0?a.createElement(u.In,{icon:"volume",className:"icon"}):a.createElement(u.In,{icon:"mute",className:"icon"}))},t.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.style,i=t.inline,r=t.autoPlay,u=t.loop,p=t.controls,l=t.classnames,d=this.state,c=d.muted,y=d.src;return a.createElement("div",{className:l("Audio",n,i?"Audio--inline":""),style:o},a.createElement("audio",{className:l("Audio-original"),ref:this.audioRef,onCanPlay:this.load,autoPlay:r,controls:!0,muted:c,loop:u},a.createElement("source",{src:y})),a.createElement("div",{className:l("Audio-controls")},p&&p.map((function(t,n){var o=t="render"+s()(t);return a.createElement(a.Fragment,{key:n},e[o]())}))))},t.defaultProps={inline:!0,autoPlay:!1,playbackRate:1,loop:!1,rates:[],progressInterval:1e3,controls:["rates","play","time","process","volume"]},(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"progress",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[HTMLMediaElement]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"audioRef",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"load",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Number]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handlePlaybackRate",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleMute",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handlePlaying",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"getCurrentTime",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"getDuration",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"onDurationCheck",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"onSeekChange",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"onSeekMouseDown",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"onSeekMouseUp",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"setVolume",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Number]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"formatTime",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Number]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"pad",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"toggleHandlePlaybackRate",null),(0,o.Cg)([r.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Boolean]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"toggleHandleVolume",null),t}(a.Component),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.C6)(t,e),(0,o.Cg)([(0,r.A49)({type:"audio"})],t)}(p)}}]);