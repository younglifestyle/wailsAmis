"use strict";(self.webpackChunktestAmis=self.webpackChunktestAmis||[]).push([[2359],{52359:function(e,t,n){n.r(t),n.d(t,{MultiSelectControlRenderer:function(){return g},SelectControlRenderer:function(){return y},default:function(){return m}});var o=n(31635),l=n(96540),i=n(32485),r=n.n(i),s=n(7309),a=n.n(s),u=n(38221),p=n.n(u),c=n(8096),d=n(65408),h=n(61816),v=n(66283),m=function(e){function t(t){var n=e.call(this,t)||this;return n.lastTerm="",n.fetchCancel=null,n.changeValue=n.changeValue.bind(n),n.lazyloadRemote=p()(n.loadRemote.bind(n),250,{trailing:!0,leading:!1}),n.inputRef=n.inputRef.bind(n),n}return(0,o.C6)(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props;(0,c.Amo)(t.autoComplete,t.data)&&(0,c.B92)(e.autoComplete,t.autoComplete,e.data,t.data)&&this.lazyloadRemote(this.lastTerm)},t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook(),this.fetchCancel=null},t.prototype.inputRef=function(e){this.input=e},t.prototype.focus=function(){var e,t;this.input&&(null===(t=null===(e=this.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e))},t.prototype.getValue=function(e,t){void 0===t&&(t=[]);var n=this.props,o=n.joinValues,l=n.extractValue,i=n.delimiter,r=n.multiple,s=n.valueField,u=n.options,p=e;return(Array.isArray(e)?e:e?[e]:[]).forEach((function(e){a()(u,(function(t){return t[s||"value"]==e[s||"value"]}))||t.push(e)})),o?p=r?Array.isArray(e)?e.map((function(e){return e[s||"value"]})).join(i):e?e[s||"value"]:"":p?p[s||"value"]:"":l&&(p=r?Array.isArray(e)?e.map((function(e){return e[s||"value"]})):e?[e[s||"value"]]:[]:p?p[s||"value"]:""),p},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,o.sH)(this,void 0,void 0,(function(){var n,l,i,r,s,a,u,p;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return n="on"+e.charAt(0).toUpperCase()+e.slice(1),l=this.props,i=l.dispatchEvent,r=l.options,s=l.value,a=l.multiple,u=l.selectedOptions,[4,i(e,(0,c.RKM)(this.props,{options:r,items:r,value:s,selectedItems:a?u:u[0]}))];case 1:return(null==(p=o.sent())?void 0:p.prevented)||this.props[n](t),[2]}}))}))},t.prototype.changeValue=function(e){return(0,o.sH)(this,void 0,void 0,(function(){var t,n,l,i,r,s,a,u;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return t=this.props,n=t.onChange,l=t.setOptions,i=t.options,t.data,r=t.dispatchEvent,s=[],a=this.getValue(e,s),s.length&&l(i.concat(s)),[4,r("change",(0,c.RKM)(this.props,{value:a,options:i,items:i,selectedItems:e}))];case 1:return(null==(u=o.sent())?void 0:u.prevented)||null==n||n(a),[2]}}))}))},t.prototype.loadRemote=function(e){var t;return(0,o.sH)(this,void 0,void 0,(function(){var n,l,i,r,s,a,u,p,d,h,v,m,f=this;return(0,o.YH)(this,(function(o){switch(o.label){case 0:if(n=this.props,l=n.autoComplete,i=n.env,r=n.data,s=n.setOptions,a=n.setLoading,u=n.formInited,p=n.addHook,!i||!i.fetcher)throw new Error("fetcher is required");if(!1===u&&p)return this.unHook&&this.unHook(),[2,this.unHook=p(this.loadRemote.bind(this,e),"init")];if(this.lastTerm=e,d=(0,c.ed2)(r,{term:e,value:e}),!(0,c.Amo)(l,d))return[2,Promise.resolve({options:[]})];this.fetchCancel&&(null===(t=this.fetchCancel)||void 0===t||t.call(this,"autoComplete request cancelled."),this.fetchCancel=null,a(!1)),a(!0),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,i.fetcher(l,d,{cancelExecutor:function(e){return f.fetchCancel=e}})];case 2:return h=o.sent(),this.fetchCancel=null,v=h.data&&h.data.options||h.data||[],m=this.mergeOptions(v),s(m),[2,{options:m}];case 3:return a(!1),[7];case 4:return[2]}}))}))},t.prototype.mergeOptions=function(e){var t=this.props,n=t.selectedOptions,l=t.valueField,i=void 0===l?"value":l,r=(0,c.a5s)(e,void 0,i).concat();return Array.isArray(n)&&n.length&&n.forEach((function(e){a()(r,(function(t){return t[i]===e[i]}))||r.push((0,o.Cl)((0,o.Cl)({},e),{hidden:!0}))})),r},t.prototype.renderMenu=function(e,t){var n=this.props,o=n.menuTpl,l=n.render,i=n.data,s=n.optionClassName,a=n.testIdBuilder;return l("menu/".concat(t.index),o,{showNativeTitle:!0,className:r()("Select-option-content",s),data:(0,c.ed2)((0,c.ed2)(i,t),e),testIdBuilder:null==a?void 0:a.getChild("option-"+e.value||0)})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.option2value=function(){},t.prototype.renderOtherMode=function(){var e=this.props,t=e.selectMode,n=(0,o.Tt)(e,["selectMode"]);return l.createElement(f,(0,o.Cl)({},n,{selectMode:"group"===t?"list":t}))},t.prototype.doAction=function(e,t,n){var o,l,i,r=this.props,s=r.resetValue,a=r.onChange,u=r.formStore,p=r.store,d=r.name,h=r.valueField,v=null==e?void 0:e.actionType;if("clear"===v)null==a||a("");else if("reset"===v){var m=null!==(i=(0,c.dnO)(null!==(l=null==u?void 0:u.pristine)&&void 0!==l?l:null==p?void 0:p.pristine,d))&&void 0!==i?i:s,f=this.getValue(((o={})[h]=null!=m?m:"",o));null==a||a(f)}},t.prototype.handleOptionAdd=function(e,t,n,l){var i=this;void 0===e&&(e=-1),void 0===n&&(n=!1);var r=this.props,s=r.onAdd,a=r.autoComplete;null==s||s(e,t,n,(function(){return(0,o.sH)(i,void 0,void 0,(function(){return(0,o.YH)(this,(function(e){switch(e.label){case 0:return null==l||l(t),a?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return e.sent(),[2,!1];case 2:return[2]}}))}))}))},t.prototype.handleOptionEdit=function(e,t,n,l){var i=this,r=this.props,s=r.onEdit,a=r.autoComplete;null==s||s(e,t,n,(function(){return(0,o.sH)(i,void 0,void 0,(function(){return(0,o.YH)(this,(function(t){switch(t.label){case 0:return null==l||l(e),a?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return t.sent(),[2,!1];case 2:return[2]}}))}))}))},t.prototype.handleOptionDelete=function(e,t){var n=this,l=this.props,i=l.onDelete,r=l.autoComplete;null==i||i(e,(function(){return(0,o.sH)(n,void 0,void 0,(function(){return(0,o.YH)(this,(function(n){switch(n.label){case 0:return null==t||t(e),r?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return n.sent(),[2,!1];case 2:return[2]}}))}))}))},t.prototype.render=function(){var e=this,t=this.props,n=t.autoComplete,i=t.searchable,s=t.showInvalidMatch,a=t.options,u=t.className,p=t.popoverClassName,h=t.style,v=t.loading;t.value;var m=t.selectedOptions,f=t.multi,y=t.multiple,g=t.placeholder,C=t.id,b=t.classPrefix;t.classnames;var O=t.creatable;t.inline;var M=t.noResultsText,A=t.render,S=t.menuTpl,T=t.borderMode,w=t.selectMode,R=t.env,H=t.mobileUI,E=t.overlay,I=t.filterOption,N=(0,o.Tt)(t,["autoComplete","searchable","showInvalidMatch","options","className","popoverClassName","style","loading","value","selectedOptions","multi","multiple","placeholder","id","classPrefix","classnames","creatable","inline","noResultsText","render","menuTpl","borderMode","selectMode","env","mobileUI","overlay","filterOption"]),k=this.props,F=k.classPrefix,V=k.themeCss;return M&&(M=A("noResultText",M)),l.createElement("div",{className:r()("".concat(b,"SelectControl"),u),style:h},["table","list","group","tree","chained","associated"].includes(w)?this.renderOtherMode():l.createElement(d.l6,(0,o.Cl)({},N,{onAdd:this.handleOptionAdd,onEdit:this.handleOptionEdit,onDelete:this.handleOptionDelete,className:r()((0,c.NH8)((0,o.Cl)((0,o.Cl)({},this.props),{name:"selectControlClassName",id:C,themeCss:V}))),popoverClassName:r()(p,(0,c.NH8)((0,o.Cl)((0,o.Cl)({},this.props),{name:"selectPopoverClassName",id:C,themeCss:V}))),mobileUI:H,popOverContainer:H?null==R?void 0:R.getModalContainer:N.popOverContainer||R.getModalContainer,borderMode:T,placeholder:g,multiple:y||f,ref:this.inputRef,value:m,options:a,filterOption:"string"==typeof I?(0,c.sce)(I,"options","inputValue","option"):I,loadOptions:(0,c.Amo)(n)?this.lazyloadRemote:void 0,showInvalidMatch:s,creatable:O,searchable:i||!!n,onChange:this.changeValue,onBlur:function(t){return e.dispatchEvent("blur",t)},onFocus:function(t){return e.dispatchEvent("focus",t)},loading:v,noResultsText:M,renderMenu:S?this.renderMenu:void 0,overlay:E})),l.createElement(c.z4D,(0,o.Cl)({},this.props,{config:{themeCss:V,classNames:[{key:"selectControlClassName",weights:{focused:{suf:".is-opened:not(.is-mobile)"},disabled:{suf:".is-disabled"}}},{key:"selectPopoverClassName",weights:{default:{suf:" .".concat(F,"Select-option")},hover:{suf:" .".concat(F,"Select-option.is-highlight")},focused:{inner:".".concat(F,"Select-option.is-active")}}}],id:C},env:R})))},t.defaultProps={clearable:!1,searchable:!1,multiple:!1,showInvalidMatch:!1},(0,o.Cg)([c.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"renderMenu",null),(0,o.Cg)([c.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Object,Boolean,Function]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleOptionAdd",null),(0,o.Cg)([c.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Object,Boolean,Function]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleOptionEdit",null),(0,o.Cg)([c.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Function]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleOptionDelete",null),(0,o.Cg)([(0,v.E)(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"render",null),t}(l.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.C6)(t,e),t.prototype.renderItem=function(e){var t=this.props,n=t.labelField,o=t.menuTpl,l=t.data,i=t.render;return o?i("option/".concat(e.value),o,{data:(0,c.ed2)(l,e)}):"".concat(e.scopeLabel||"").concat(e[n||"label"])},t.prototype.render=function(){var e,t=this.props,n=t.className;t.classnames;var o=t.selectedOptions,i=t.sortable,r=t.loading,s=t.searchable,a=t.searchResultMode,u=t.showArrow,p=t.deferLoad,c=t.disabled,h=t.clearable,v=t.selectTitle,m=t.selectMode,f=t.multiple,y=t.columns,g=t.leftMode,C=t.borderMode,b=t.mobileUI,O=t.env,M=t.popOverContainer,A=t.maxTagCount,S=t.overflowTagPopover,T=t.placeholder,w=t.itemHeight,R=t.virtualThreshold,H=t.rightMode,E=t.loadingConfig,I=t.labelField,N=t.showInvalidMatch,k=t.checkAll,F=t.checkAllLabel,V=t.overlay,x=this.props,j=x.options,D=x.leftOptions,P=x.leftDefaultValue;return"associated"===m&&j&&j.length&&j[0].leftOptions&&Array.isArray(j[0].children)&&(D=j[0].leftOptions,P=null!==(e=j[0].leftDefaultValue)&&void 0!==e?e:P,j=j[0].children),l.createElement(l.Fragment,null,l.createElement(d.pX,{selectMode:m,className:n,value:o,disabled:c,clearable:h,options:j,onChange:this.handleChange,option2value:this.option2value,optionItemRender:this.renderItem,itemRender:this.renderItem,sortable:i,searchResultMode:a,onSearch:s?this.handleSearch:void 0,showArrow:u,onDeferLoad:p,selectTitle:v,multiple:f,columns:y,leftMode:g,rightMode:H,leftOptions:D,borderMode:C,mobileUI:b,popOverContainer:M||O.getModalContainer,maxTagCount:A,overflowTagPopover:S,placeholder:T,itemHeight:w,virtualThreshold:R,virtualListHeight:266,labelField:I,showInvalidMatch:N,checkAllLabel:F,checkAll:k,overlay:V}),l.createElement(d.y$,{overlay:!0,key:"info",show:r,loadingConfig:E}))},(0,o.Cg)([c.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",Object)],t.prototype,"renderItem",null),t}(h.BaseTransferRenderer),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.C6)(t,e),(0,o.Cg)([(0,c.QqA)({type:"select"})],t)}(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.C6)(t,e),t.defaultProps={multiple:!0},(0,o.Cg)([(0,c.QqA)({type:"multi-select"})],t)}(m)}}]);