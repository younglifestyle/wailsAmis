"use strict";(self.webpackChunktestAmis=self.webpackChunktestAmis||[]).push([[3032],{63032:function(t,e,n){n.r(e),n.d(e,{CheckboxControlRenderer:function(){return y},CityPicker:function(){return c},LocationControl:function(){return p},default:function(){return u}});var i=n(31635),r=n(96540),o=n(8096),l=n(65408),a=n(66283),s=function(t){var e,n=t.value,i=t.db,r=t.delimiter,o=void 0===r?",":r,l={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""};if(!i||!n)return l;var a=n&&n.code||"number"==typeof n&&n||"string"==typeof n&&/(\d{6})/.test(n)&&RegExp.$1;if(a&&i[a]){a=parseInt(a,10),l.code=a;var s=a-a%1e4;i[s]&&(l.provinceCode=s,l.province=i[s]);var d=a-a%100;d!==s&&i[d]?(l.cityCode=d,l.city=i[d]):~(null===(e=i.city[s])||void 0===e?void 0:e.indexOf(a))&&(l.cityCode=a,l.city=i[a]),a%100&&(l.district=i[a],l.districtCode=a)}return n&&n.street?l.street=n.street:"string"==typeof n&&~n.indexOf(o)&&(l.street=n.slice(n.indexOf(o)+o.length)),l},d=function(t){n.e(7556).then(n.bind(n,47556)).then(t)},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},e}return(0,i.C6)(e,t),e.prototype.componentDidMount=function(){var t=this;this.loadDb((function(){return t.syncIn()}))},e.prototype.componentDidUpdate=function(t){var e=this,n=this.props;n.value!==t.value&&this.loadDb((function(){return e.syncIn(n)}))},e.prototype.loadDb=function(t){var e=this;this.state.db?null==t||t():d((function(n){e.setState({db:(0,i.Cl)((0,i.Cl)({},n.default),{province:n.province,city:n.city,district:n.district})},t)}))},e.prototype.handleProvinceChange=function(t){this.setState(t?{province:t.label,provinceCode:t.value,city:"",cityCode:0,district:"",districtCode:0,street:"",code:t?t.value:0}:{code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},this.syncOut)},e.prototype.handleCityChange=function(t){if(t.value%100)return this.handleDistrictChange(t,{cityCode:t.value});this.setState(t?{city:t.label,cityCode:t.value,district:"",districtCode:0,street:"",code:t.value}:{city:"",cityCode:0,district:"",districtCode:0,street:"",code:this.state.provinceCode},this.syncOut)},e.prototype.handleDistrictChange=function(t,e){void 0===e&&(e={}),this.setState(t?(0,i.Cl)((0,i.Cl)({},e),{district:t.label,districtCode:t.value,street:"",code:t.value}):(0,i.Cl)((0,i.Cl)({},e),{district:"",districtCode:0,street:"",code:this.state.cityCode}),this.syncOut)},e.prototype.handleStreetChange=function(t){this.setState({street:t.currentTarget.value})},e.prototype.handleStreetEnd=function(){this.syncOut()},e.prototype.syncIn=function(t){void 0===t&&(t=this.props);var e=this.state.db,n=t.value,i=t.delimiter;e&&this.setState(s({value:n,delimiter:i,db:e}))},e.prototype.syncOut=function(){var t=this.props,e=t.onChange,n=t.allowStreet,i=t.joinValues,r=t.extractValue,o=t.delimiter,l=this.state,a=l.code,s=l.province,d=l.city,c=l.district,u=l.street,p=l.provinceCode,y=l.cityCode,C=l.districtCode;e((void 0===r?i:r)?a?n&&u?[a,u].join(o):String(a):"":{code:a,provinceCode:p,province:s,cityCode:y,city:d,districtCode:C,district:c,street:u})},e.prototype.render=function(){var t,e,n=this.props,o=n.classnames,a=n.className;n.style;var s=n.disabled,d=n.allowCity,c=n.allowDistrict,u=n.allowStreet,p=n.searchable,y=n.translate,C=n.loadingConfig,h=n.popOverContainer,v=n.itemClassName,g=n.testIdBuilder,f=this.state,m=f.provinceCode,b=f.cityCode,S=f.districtCode,O=f.street,w=f.db;return w?r.createElement("div",{className:o("CityPicker",a)},r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.province.map((function(t){return{label:w[t],value:t}})),value:m||"",onChange:this.handleProvinceChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("province")}),d&&w.city[m]&&w.city[m].length?r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.city[m].map((function(t){return{label:w[t],value:t}})),value:b||"",onChange:this.handleCityChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("city")}):null,b&&c&&(null===(e=null===(t=w.district[m])||void 0===t?void 0:t[b])||void 0===e?void 0:e.length)?r.createElement(l.l6,{className:o(v),searchable:p,disabled:s,options:w.district[m][b].map((function(t){return{label:w[t],value:t}})),value:S||"",onChange:this.handleDistrictChange,popOverContainer:h,testIdBuilder:null==g?void 0:g.getChild("district")}):null,u&&m?r.createElement("input",(0,i.Cl)({className:o("CityPicker-input"),value:O||"",onChange:this.handleStreetChange,onBlur:this.handleStreetEnd,placeholder:y("City.street"),disabled:s},null==g?void 0:g.getChild("street").getTestId())):null):r.createElement(l.y$,{show:!0,size:"sm",loadingConfig:C})},e.defaultProps={joinValues:!0,extractValue:!0,delimiter:",",allowCity:!0,allowDistrict:!0,allowStreet:!1},(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"handleProvinceChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"handleCityChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object,Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"handleDistrictChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"handleStreetChange",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"handleStreetEnd",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"syncIn",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"syncOut",null),e}(r.Component),u=(0,o.IWl)((0,o.t5k)(c)),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={db:null},e}return(0,i.C6)(e,t),e.prototype.doAction=function(t,e,n){var i,r,l=this.props,a=l.resetValue,s=l.onChange,d=l.formStore,c=l.store,u=l.name,p=null==t?void 0:t.actionType;if("clear"===p)s("");else if("reset"===p){var y=null!==(r=(0,o.dnO)(null!==(i=null==d?void 0:d.pristine)&&void 0!==i?i:null==c?void 0:c.pristine,u))&&void 0!==r?r:a;s(null!=y?y:"")}},e.prototype.handleChange=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n,r,l;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return e=this.props,n=e.dispatchEvent,r=e.onChange,[4,n("change",(0,o.RKM)(this.props,{value:t},"value"))];case 1:return(null==(l=i.sent())?void 0:l.prevented)||r(t),[2]}}))}))},e.prototype.renderStatic=function(t){var e=this;void 0===t&&(t="");var n=this.props,o=n.value,a=n.delimiter,c=n.loadingConfig;if(!this.state.db)return d((function(t){e.setState({db:(0,i.Cl)((0,i.Cl)({},t.default),{province:t.province,city:t.city,district:t.district})})})),r.createElement(l.y$,{size:"sm",show:!0,loadingConfig:c});if(!o)return r.createElement(r.Fragment,null,t);var u=s({value:o,delimiter:a,db:this.state.db}),p=u.province,y=u.city,C=u.district,h=u.street;return r.createElement(r.Fragment,null,[p,y,C,h].filter((function(t){return!!t})).join(a))},e.prototype.render=function(){var t=this.props,e=t.value,n=t.allowCity,i=t.allowDistrict,o=t.extractValue,a=t.joinValues,s=t.allowStreet,d=t.disabled,c=t.searchable,p=t.env,y=t.mobileUI,C=t.popOverContainer,h=t.itemClassName,v=t.testIdBuilder;return y?r.createElement(l.td,{value:e,popOverContainer:null==p?void 0:p.getModalContainer,onChange:this.handleChange,allowCity:n,allowDistrict:i,extractValue:o,joinValues:a,allowStreet:s,disabled:d,mobileUI:y}):r.createElement(u,{itemClassName:h,popOverContainer:C||(null==p?void 0:p.getModalContainer),searchable:c,value:e,onChange:this.handleChange,allowCity:n,allowDistrict:i,extractValue:o,joinValues:a,allowStreet:s,disabled:d,testIdBuilder:v})},(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object,Object,Boolean]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"doAction",null),(0,i.Cg)([o.d6t,(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[Object]),(0,i.Sn)("design:returntype",Promise)],e.prototype,"handleChange",null),(0,i.Cg)([(0,a.E)(),(0,i.Sn)("design:type",Function),(0,i.Sn)("design:paramtypes",[]),(0,i.Sn)("design:returntype",void 0)],e.prototype,"render",null),e}(r.Component),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),(0,i.Cg)([(0,o.eIh)({type:"input-city",sizeMutable:!1})],e)}(p)}}]);