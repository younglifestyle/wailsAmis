"use strict";(self.webpackChunktestAmis=self.webpackChunktestAmis||[]).push([[3046],{93046:function(t,e,a){a.r(e),a.d(e,{TabsRenderer:function(){return y},default:function(){return p}});var n=a(31635),i=a(96540),o=a(8096),r=a(7309),s=a.n(r),l=a(24713),u=a.n(l),d=a(65408),c=a(11741),h=a.n(c),p=function(t){function e(e){var a=t.call(this,e)||this;a.newTabDefaultId=3;var i=e.location||window.location,r=e.tabs,l=e.source,u=e.data,d=0;if(void 0!==e.activeKey)d=e.activeKey;else if(i&&Array.isArray(r)){var c=i.hash.substring(1),h=s()(r,(function(t){return t.hash===c}));h?d=h.hash:void 0!==e.defaultKey?d="string"==typeof e.defaultKey?(0,o.GvO)(e.defaultKey,e.data):e.defaultKey:e.defaultActiveKey&&(d="string"==typeof e.defaultActiveKey?(0,o.GvO)(e.defaultActiveKey,e.data):e.defaultActiveKey),d=d||r[0]&&r[0].hash||0}var p=(0,n.zs)(a.initTabArray(r,l,u),2),y=p[0],v=p[1];return a.state={prevKey:void 0,activeKey:a.activeKey=d,localTabs:y,isFromSource:v},a}return(0,n.C6)(e,t),e.prototype.initTabArray=function(t,e,a){if(!t)return[[],!1];var i=(0,o.GvO)(e,a,"| raw");if(!Array.isArray(i))return[t,!1];t=Array.isArray(t)?t:[t];var r=[];return i.forEach((function(e){r.push.apply(r,(0,n.fX)([],(0,n.zs)(t.map((function(t){return(0,n.Cl)((0,n.Cl)({},t),{data:e})}))),!1))})),[r,!0]},e.prototype.componentDidMount=function(){var t,e;this.autoJumpToNeighbour(this.activeKey);var a=this.props,n=a.name,i=a.value,r=a.onChange,s=a.source;a.tabs;var l=a.data,u=this.state.localTabs;if(n&&"function"==typeof r&&!s)if((i=null!=i?i:(0,o.dnO)(l,n))&&Array.isArray(u)){var d=this.resolveKeyByValue(i);void 0!==d&&this.handleSelect(d)}else{var c=this.resolveTabByKey(this.activeKey);c&&i!==(null!==(t=c.value)&&void 0!==t?t:c.title)&&r(null!==(e=c.value)&&void 0!==e?e:c.title,n)}},e.prototype.componentDidUpdate=function(t,e){var a,i,r,l=this.props,u=this.state.localTabs,d=(0,o.GvO)(t.defaultActiveKey,t.data),c=(0,o.GvO)(l.defaultActiveKey,l.data);if((0,o.JQ)({tabs:l.tabs,source:(0,o.GvO)(l.source,l.data,"| raw")},{tabs:t.tabs,source:(0,o.GvO)(t.source,t.data,"| raw")},!1)){var h=(0,n.zs)(this.initTabArray(l.tabs,l.source,l.data),2),p=h[0],y=h[1];this.setState({localTabs:p,isFromSource:y}),u=p}if(l.location&&t.location&&l.location.hash!==t.location.hash){var v=l.location.hash.substring(1);if(!v)return;(m=s()(u,(function(t){return t.hash===v})))&&m.hash&&m.hash!==this.state.activeKey&&this.setState({activeKey:this.activeKey=m.hash,prevKey:this.state.activeKey})}else if(Array.isArray(u)&&Array.isArray(e.localTabs)&&JSON.stringify(u.map((function(t){return t.hash})))!==JSON.stringify(e.localTabs.map((function(t){return t.hash})))){var b=this.state.activeKey,f=l.location,m=null;if(f&&Array.isArray(u)){var g=f.hash.substring(1);m=s()(u,(function(t){return t.hash===g}))}m?b=m.hash:u&&u.some((function(t,e){return t.hash?t.hash===b:e===b}))||(b=u&&u[0]&&u[0].hash||0),this.setState({prevKey:void 0,activeKey:this.activeKey=b})}else if(d!==c){if(null==c)return;var K=null;(m=s()(u,(function(t){return t.hash===c})))?K=m.hash:"number"==typeof c&&u[c]&&(K=c),null!==K&&this.setState({prevKey:d,activeKey:this.activeKey=K})}this.autoJumpToNeighbour(this.activeKey);var T,S=this.props,A=S.name,C=S.value,O=S.onChange,x=S.source,N=S.data;A&&"function"==typeof O&&!x&&((C=null!=C?C:(0,o.dnO)(N,A))!==(null!==(a=t.value)&&void 0!==a?a:(0,o.dnO)(t.data,t.name))&&void 0!==(T=this.resolveKeyByValue(C))&&T!==this.activeKey?this.handleSelect(T):this.activeKey!==e.activeKey&&(m=this.resolveTabByKey(this.activeKey))&&C!==(null!==(i=m.value)&&void 0!==i?i:m.title)&&O(null!==(r=m.value)&&void 0!==r?r:m.title,A))},e.prototype.resolveTabByKey=function(t){var e=this.state.localTabs;if(Array.isArray(e))return s()(e,(function(e,a){return e.hash?e.hash===t:a===t}))},e.prototype.resolveKeyByValue=function(t){var e=this.state.localTabs;if(Array.isArray(e)){var a=s()(e,(function(e){var a;return(null!==(a=e.value)&&void 0!==a?a:e.title)===t}));return a&&a.hash?a.hash:e.indexOf(a)}},e.prototype.autoJumpToNeighbour=function(t){var e=this.props;e.tabs;var a=e.data,n=this.state.localTabs;if(Array.isArray(n)){var i=u()(n,(function(e,a){return e.hash?e.hash===t:a===t}));if(n[i]&&!(0,o.zNq)(n[i],this.props.data))for(var r=n.length,s=i,l=i;s-- >=0||l++<r;){var d=null;if(s>=0&&(0,o.zNq)(n[s],a)?d=n[s].hash||s:l<r&&(0,o.zNq)(n[l],a)&&(d=n[l].hash||l),null!==d){this.setState({activeKey:this.activeKey=d});break}}}},e.prototype.handleAdd=function(){var t=this,e=this.state.localTabs.concat();e.push({title:"tab".concat(this.newTabDefaultId++),body:"tab"}),this.setState({localTabs:e},(function(){t.switchTo(t.state.localTabs.length-1)}))},e.prototype.handleClose=function(t,e){var a=this.state.localTabs.concat();a.splice(t,1),this.setState({localTabs:a})},e.prototype.handleEdit=function(t,e){var a=this.state.localTabs.concat();a[t].title=e,this.setState({localTabs:a})},e.prototype.handleDragChange=function(t){return(0,n.sH)(this,void 0,void 0,(function(){var e,a,i=this;return(0,n.YH)(this,(function(n){return e=this.resolveTabByKey(this.activeKey),(a=this.state.localTabs.concat()).splice(t.newIndex,0,a.splice(t.oldIndex,1)[0]),this.setState({localTabs:a},(function(){if(e){var t=a.indexOf(e);i.switchTo(t)}})),[2]}))}))},e.prototype.handleSelect=function(t){var e;return(0,n.sH)(this,void 0,void 0,(function(){var a,i,r,s,l,u,d,c,h;return(0,n.YH)(this,(function(n){switch(n.label){case 0:return a=this.props,i=a.dispatchEvent,a.data,r=a.env,s=a.onSelect,l=a.id,u=this.state.localTabs,(d=null==u?void 0:u.find((function(e,a){return t===(e.hash?e.hash:a)})))?(null===(e=r.tracker)||void 0===e||e.call(r,{eventType:"tabChange",eventData:{id:l,key:t}}),[4,i("change",(0,o.RKM)(this.props,{value:(null==d?void 0:d.hash)?null==d?void 0:d.hash:t+1}))]):[2];case 1:return(null==(c=n.sent())?void 0:c.prevented)||("string"==typeof t&&r?r.updateLocation("#".concat(t)):"string"==typeof this.state.activeKey&&r&&r.updateLocation("#"),this.setState({activeKey:this.activeKey=t,prevKey:this.state.activeKey}),"string"==typeof s?(h=(0,o.uPQ)(s,"key","props"))&&h(t,this.props):"function"==typeof s&&s(t,this.props)),[2]}}))}))},e.prototype.doAction=function(t,e,a,n){var i=null==t?void 0:t.actionType,o=Number(null==n?void 0:n.activeKey),r=h()(o)?null==n?void 0:n.activeKey:o;"changeActiveKey"===i&&this.handleSelect("number"==typeof r?r-1:r)},e.prototype.switchTo=function(t){var e=this.state.localTabs;Array.isArray(e)&&e[t]&&this.setState({activeKey:this.activeKey=e[t].hash||t})},e.prototype.currentIndex=function(){var t=this,e=this.state.localTabs;return Array.isArray(e)?u()(e,(function(e,a){return e.hash?e.hash===t.state.activeKey:a===t.state.activeKey})):-1},e.prototype.renderTabTitle=function(t,e,a){var i=this.props.render;return"string"!=typeof t&&t?i("tab-title/".concat(e),t,{data:(0,n.Cl)({index:e,__index:e},a)}):(0,o.pbD)(t,a)},e.prototype.renderToolbar=function(){var t=this.props,e=t.toolbar,a=t.render,n=t.classnames,o=t.toolbarClassName;return e?i.createElement("div",{className:n("Tabs-toolbar",o)},a("toolbar",e)):null},e.prototype.renderTabs=function(){var t=this,e=this.props,a=e.classnames,r=e.classPrefix,s=e.contentClassName,l=e.linksClassName,u=e.tabRender,c=e.className,h=e.style,p=e.render,y=e.data,v=e.mode,b=e.tabsMode,f=e.unmountOnExit;e.source;var m=e.formStore,g=e.formMode,K=e.formHorizontal,T=e.subFormMode,S=e.subFormHorizontal,A=e.addable,C=e.closable,O=e.draggable,x=e.showTip,N=e.showTipClassName,E=e.editable,w=e.sidePosition,z=e.translate,B=e.addBtnText,F=e.collapseOnExceed,I=e.collapseBtnLabel,k=e.disabled,D=e.mobileUI,G=e.swipeable,H=e.testIdBuilder,M=b||v,P=this.props.mountOnEnter;m&&(P=!1);var U,j=this.state,J=j.localTabs;return U=j.isFromSource?J.map((function(e,a){var r,s,l=(0,o.ed2)(y,(0,o.Gvm)(e.data)?(0,n.Cl)({index:a},e.data):{item:e.data,index:a});return(0,o.zNq)(e,l)?i.createElement(d.oz,(0,n.Cl)({},e,{title:t.renderTabTitle(e.title,a,l),disabled:k||(0,o.d6x)(e,l),key:a,eventKey:(0,o.pbD)(e.hash,l)||a,prevKey:a>0?(null===(r=J[a-1])||void 0===r?void 0:r.hash)||a-1:0,nextKey:a<J.length-1?(null===(s=J[a+1])||void 0===s?void 0:s.hash)||a+1:J.length-1,swipeable:G,mobileUI:D,mountOnEnter:P,unmountOnExit:"boolean"==typeof e.reload?e.reload:"boolean"==typeof e.unmountOnExit?e.unmountOnExit:f,onSelect:t.handleSelect,testIdBuilder:null==H?void 0:H.getChild("tab-".concat("string"==typeof e.title?e.title:a))}),p("item/".concat(a),(null==e?void 0:e.type)?e:e.tab||e.body,{disabled:k||(0,o.d6x)(e,l)||void 0,data:l,formMode:e.mode||T||g,formHorizontal:e.horizontal||S||K})):null})):J.map((function(e,a){var r,s;return(0,o.zNq)(e,y)?i.createElement(d.oz,(0,n.Cl)({},e,{title:t.renderTabTitle(e.title,a,y),disabled:k||(0,o.d6x)(e,y),key:a,eventKey:e.hash||a,prevKey:a>0?(null===(r=J[a-1])||void 0===r?void 0:r.hash)||a-1:0,nextKey:a<J.length-1?(null===(s=J[a+1])||void 0===s?void 0:s.hash)||a+1:J.length-1,swipeable:G,mobileUI:D,mountOnEnter:P,unmountOnExit:"boolean"==typeof e.reload?e.reload:"boolean"==typeof e.unmountOnExit?e.unmountOnExit:f,onSelect:t.handleSelect,testIdBuilder:null==H?void 0:H.getChild("tab-".concat("string"==typeof e.title?e.title:a))}),t.renderTab?t.renderTab(e,t.props,a):u?u(e,t.props,a):p("tab/".concat(a),(null==e?void 0:e.type)?e:e.tab||e.body,{disabled:k||(0,o.d6x)(e,y)||void 0,formMode:e.mode||T||g,formHorizontal:e.horizontal||S||K})):null})),i.createElement(d.tU,{addBtnText:z(B||"add"),classPrefix:r,classnames:a,mode:M,closable:C,className:c,style:h,contentClassName:s,linksClassName:l,onSelect:this.handleSelect,activeKey:this.state.activeKey,toolbar:this.renderToolbar(),addable:A,onAdd:this.handleAdd,onClose:this.handleClose,draggable:O,onDragChange:this.handleDragChange,showTip:x,showTipClassName:N,editable:E,onEdit:this.handleEdit,sidePosition:w,collapseOnExceed:F,collapseBtnLabel:I,mobileUI:D,testIdBuilder:H},U)},e.prototype.render=function(){return this.renderTabs()},e.defaultProps={className:"",mode:"",mountOnEnter:!0,unmountOnExit:!1},(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Array,String,Object]),(0,n.Sn)("design:returntype",Array)],e.prototype,"initTabArray",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",void 0)],e.prototype,"autoJumpToNeighbour",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],e.prototype,"handleAdd",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number,Object]),(0,n.Sn)("design:returntype",void 0)],e.prototype,"handleClose",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number,String]),(0,n.Sn)("design:returntype",void 0)],e.prototype,"handleEdit",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],e.prototype,"handleDragChange",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],e.prototype,"handleSelect",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number]),(0,n.Sn)("design:returntype",void 0)],e.prototype,"switchTo",null),(0,n.Cg)([o.d6t,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Number)],e.prototype,"currentIndex",null),e}(i.Component),y=function(t){function e(e,a){var n=t.call(this,e)||this;return a.registerComponent(n),n}return(0,n.C6)(e,t),e.prototype.componentWillUnmount=function(){var e;null===(e=t.prototype.componentWillUnmount)||void 0===e||e.call(this),this.context.unRegisterComponent(this)},e.contextType=o.MzX,(0,n.Cg)([(0,o.A49)({type:"tabs"}),(0,n.Sn)("design:paramtypes",[Object,Object])],e)}(p)}}]);