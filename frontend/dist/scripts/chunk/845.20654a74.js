"use strict";(self.webpackChunktestAmis=self.webpackChunktestAmis||[]).push([[845],{70845:function(e,t,n){n.r(t),n.d(t,{Navigation:function(){return f},NavigationRenderer:function(){return y},default:function(){return g}});var o=n(31635),i=n(96540),r=n(40961),a=n(51545),l=n(2404),d=n.n(l),s=n(85015),p=n.n(s),u=n(88055),c=n.n(u),v=n(8096),h=n(65408),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint={y:0,x:0},t.state={keyword:"",filteredLinks:[]},t}return(0,o.C6)(t,e),t.prototype.handleClick=function(e,t){return(0,o.sH)(this,void 0,void 0,(function(){var n,i,r;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return n=this.props,i=n.env,r=n.onSelect,e&&e.to&&(null==i||i.tracker({eventType:"link",eventData:{label:e.label,link:e.to}})),[4,null==r?void 0:r(e,t)];case 1:return o.sent(),[2,!1]}}))}))},t.prototype.handleChange=function(e){return(0,o.sH)(this,void 0,void 0,(function(){var t;return(0,o.YH)(this,(function(n){return(t=this.props.onChange)&&t(e),[2]}))}))},t.prototype.toggleLink=function(e,t,n){var o,i;null===(i=(o=this.props).onToggle)||void 0===i||i.call(o,e,t,n)},t.prototype.getDropInfo=function(e,t,n){var o,i,r,a=this.props,l=a.dragOnSameLevel,d=a.indentSize,s=e.target.getBoundingClientRect(),p=null===(o=this.dragNode)||void 0===o?void 0:o.link,u=s.top,c=s.height,v=s.width,h=e.clientY,f=e.clientX,g=n*(null!==(i=parseInt(d,10))&&void 0!==i?i:16),m=g+.2*v;return r=h>=u+c/2?"bottom":"top",!l&&"bottom"===r&&f>=this.startPoint.x+m&&(r="self"),{nodeId:t,dragLink:p,position:r,rect:s,height:c,left:g}},t.prototype.updateDropIndicator=function(e){var t,n=this.props,o=n.dragOnSameLevel,i=n.overflow,a=e.target.querySelector("a"),l=null==a?void 0:a.getAttribute("data-id"),s=Number(null==a?void 0:a.getAttribute("data-depth")),p=i&&i.enable&&i.wrapperComponent||"ul";if(o&&(null===(t=this.dragNode)||void 0===t?void 0:t.node.closest("".concat(p,'[role="menu"]')))!==(null==a?void 0:a.closest("".concat(p,'[role="menu"]'))))return this.setState({dropIndicator:void 0}),void(this.dropInfo=null);this.dropInfo=this.getDropInfo(e,l,s);var u=this.dropInfo,c=u.position,v=u.rect,h=u.dragLink,f=u.height,g=u.left;if(l===(null==h?void 0:h.__id))return this.setState({dropIndicator:void 0}),void(this.dropInfo=null);var m=(0,r.findDOMNode)(this).firstChild;if("self"===c){var y={top:v.top-m.getBoundingClientRect().top,left:g,width:m.getBoundingClientRect().width-g,height:f,opacity:.2};(!this.state.dropIndicator||this.state.dropIndicator&&!d()(this.state.dropIndicator,y))&&this.setState({dropIndicator:y})}else y={top:("bottom"===c?v.top+v.height:v.top)-m.getBoundingClientRect().top,left:g,width:m.getBoundingClientRect().width-g},(!this.state.dropIndicator||this.state.dropIndicator&&!d()(this.state.dropIndicator,y))&&this.setState({dropIndicator:y})},t.prototype.handleDragStart=function(e){var t=this;return function(n){n.stopPropagation();var o=n.currentTarget;n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage(o,0,0),t.dragNode={node:o,link:e},t.dropInfo=null,t.startPoint={x:n.clientX,y:n.clientY},o.addEventListener("dragend",t.handleDragEnd),document.body.addEventListener("dragover",t.handleDragOver)}},t.prototype.handleDragOver=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragNode){var t=e.target.querySelector("a");(null==t?void 0:t.getAttribute("data-id"))&&this.updateDropIndicator(e)}},t.prototype.handleDragEnd=function(e){var t,n,o;e.preventDefault(),e.stopPropagation(),this.setState({dropIndicator:void 0});var i=e.currentTarget,r=i.getAttribute("data-id");if(!r){var a=i.querySelector("a");a&&(r=a.getAttribute("data-id"))}var l=null===(t=this.dropInfo)||void 0===t?void 0:t.nodeId;this.dropInfo&&l&&r!==l&&(i.removeEventListener("dragend",this.handleDragEnd),document.body.removeEventListener("dragover",this.handleDragOver),null===(o=(n=this.props).onDragUpdate)||void 0===o||o.call(n,this.dropInfo),this.dragNode=null,this.dropInfo=null)},t.prototype.normalizeNavigations=function(e,t){var n=this,r=this.props,a=r.level,l=r.stacked,d=r.mode,s=r.itemActions,u=r.render,c=r.popOverContainer,f=r.env,g=r.classnames,m=r.data,y=r.collapsed;if(!e)return[];if(a&&t>a)return[];var C=y&&1===t;return e.filter((function(e){return!(!0===e.hidden||!1===e.visible)})).map((function(e){var r=[],a=[];e.icon&&(Array.isArray(e.icon)?e.icon:[e.icon]).forEach((function(e,t){if(i.isValidElement(e))r.push(e);else if(p()(e))r.push(i.createElement(h.In,{key:"icon-".concat(t),cx:g,icon:e,className:C?"":"mr-2"}));else if(e&&(0,v.Gvm)(e)){var n="after"===e.position,o=i.createElement(h.In,{key:"icon-".concat(t),cx:g,icon:e.icon||e,className:C?"":n?"ml-2":"mr-2"});n?a.push(o):r.push(o)}}));var y="string"==typeof e.label?(0,v.pbD)(e.label,m):i.isValidElement(e.label)?i.cloneElement(e.label):u("inline",e.label),b=l&&"float"!==d&&!e.expanded&&e.overflow&&(0,v.Gvm)(e.overflow)&&e.overflow.enable,S=e.children;if(b){var k=e.overflow,w=k.maxVisibleCount,I=k.overflowIndicator,N=void 0===I?"fa fa-ellipsis-h":I,D=k.overflowLabel,O=k.overflowClassName,E=w||2;E<((null==S?void 0:S.length)||0)&&(S=null==S?void 0:S.map((function(t,n){return(0,o.Cl)((0,o.Cl)({},t),{label:n===E?i.createElement("span",{className:g(O)},i.createElement(h.In,{icon:N,className:"icon Nav-item-icon"}),D&&(0,v.Gvm)(D)?u("nav-overflow-label",D):D):t.label,hidden:n>E||e.hidden,expandMore:n===E})})))}return{link:e,label:y,labelExtra:a.length?i.createElement("i",{className:g("Nav-Menu-item-icon-after")},a):null,icon:r.length?i.createElement("i",null,r):null,children:S?n.normalizeNavigations(S,"group"===e.mode?t:t+1):[],path:e.to,open:e.unfolded,extra:s?u("inline",s,{data:(0,v.ed2)(m,e),popOverContainer:c||(f&&f.getModalContainer?f.getModalContainer:function(){return document.body}),closeOnClick:!0}):null,disabled:!!e.disabled,disabledTip:e.disabledTip,hidden:e.hidden,className:e.className,mode:e.mode}}))},t.prototype.handleSearch=function(e){return(0,o.sH)(this,void 0,void 0,(function(){var t,n,i,r,l,d,s;return(0,o.YH)(this,(function(p){return t=this.props,n=t.links,i=t.searchConfig,r=void 0===i?{}:i,l=c()(null!=n?n:[]),d=null==r?void 0:r.matchFunc,e?(d&&"string"==typeof d?d=(0,v.sce)(d,"link","keyword"):"function"==typeof d||(d=function(e,t){var n,o;return(null===(n=(0,a.Ht)([e],t,{keys:["label","title","key"],threshold:a.Ht.rankings.CONTAINS}))||void 0===n?void 0:n.length)||(null==e?void 0:e.children)&&(null===(o=e.children)||void 0===o?void 0:o.length)>0}),s=function(e,t){var n=function(e,i){if(d(i,t))return e.push((0,o.Cl)((0,o.Cl)({},i),{unfolded:!0})),e;if(Array.isArray(i.children)){var r=i.children.reduce(n,[]);r.length&&e.push((0,o.Cl)((0,o.Cl)({},i),{unfolded:!0,children:r}))}return e};return e.reduce(n,[])},this.setState({keyword:e,filteredLinks:s(l,e)}),[2]):(this.setState({keyword:"",filteredLinks:[]}),[2])}))}))},t.prototype.renderSearchBox=function(){var e,t,n,o=this.props,r=o.classnames,a=o.searchable,l=o.searchConfig,d=void 0===l?{}:l,s=this.state.keyword;return i.createElement(i.Fragment,null,a?i.createElement(h.Gd,{className:r("Nav-SearchBox",null==d?void 0:d.className),mini:null!==(e=d.mini)&&void 0!==e&&e,enhance:null!==(t=d.enhance)&&void 0!==t&&t,clearable:null===(n=d.clearable)||void 0===n||n,searchImediately:d.searchImediately,placeholder:d.placeholder,defaultValue:"",value:null!=s?s:"",onSearch:this.handleSearch,onChange:v.lQ1}):null)},t.prototype.render=function(){var e,t=this.props,n=t.className,o=t.style,r=t.stacked,a=t.mode,l=t.classnames,d=t.links,s=t.loading,p=t.overflow,u=t.loadingConfig,c=t.itemBadge,f=t.badge,g=t.data,m=t.location,y=t.collapsed,C=t.expandIcon,b=t.indentSize,S=t.accordion,k=t.draggable,w=t.themeColor,I=t.expandPosition,N=t.popupClassName,D=t.disabled,O=t.id,E=t.render,A=t.popOverContainer,L=t.env,x=t.searchable,R=t.testIdBuilder,_=this.state,F=_.dropIndicator,H=_.filteredLinks,T=null;if(p&&(0,v.Gvm)(p)&&p.enable){var P=p.overflowIndicator,j=void 0===P?"fa fa-ellipsis-h":P,B=p.overflowLabel,U=p.overflowClassName;T=i.createElement("span",{className:l(U)},i.createElement(i.Fragment,null,i.createElement(h.In,{icon:j,className:"icon Nav-item-icon"}),B&&(0,v.Gvm)(B)?E("nav-overflow-label",B):B))}var z=null,M="";if(o)try{z=(0,v.K8U)(o,g);var X=JSON.stringify(z).replace(/\,/g,";").replace(/\"/g,"").replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));M=l("Nav-PopupClassName-".concat(O)),document.getElementById(M)||(0,v.zTC)({style:".".concat(M," ").concat(X),classId:M})}catch(e){}var Y=Array.isArray(H)&&H.length>0?H:d,K=i.createElement(i.Fragment,null,Array.isArray(Y)?i.createElement(h.W1,{navigations:this.normalizeNavigations(Y,1),isActive:function(e,t){if(e.link&&void 0!==e.link.active)return e.link.active;var n=e.path;return!(m.pathname!==n)},isOpen:function(e){return!!e.open},stacked:!!r,mode:a,testIdBuilder:R,themeColor:w,onSelect:this.handleClick,onToggle:this.toggleLink,onChange:this.handleChange,renderLink:function(e){return e.link},badge:c||f,collapsed:y,overflowedIndicator:T,overflowMaxCount:null==p?void 0:p.maxVisibleCount,overflowedIndicatorPopupClassName:l(null==p?void 0:p.overflowPopoverClassName),overflowSuffix:(null==p?void 0:p.overflowSuffix)?E("nav-overflow-suffix",null==p?void 0:p.overflowSuffix):null,overflowItemWidth:null==p?void 0:p.itemWidth,overflowComponent:null==p?void 0:p.wrapperComponent,overflowStyle:null==p?void 0:p.style,popupClassName:"".concat(N||"").concat(M?" ".concat(M):""),expandIcon:C?"string"==typeof C?C:E("expand-icon",C):null,expandBefore:"after"!==I,inlineIndent:b,accordion:S,draggable:k,data:g,disabled:D,onDragStart:this.handleDragStart,popOverContainer:A||(L&&L.getModalContainer?L.getModalContainer:function(){return document.body})}):null,i.createElement(h.y$,{show:!!s,overlay:!0,loadingConfig:u}));return i.createElement("div",{className:l("Nav",n,(e={},e["Nav-horizontal"]=!r,e["Nav--searchable"]=!!x,e)),style:z},x?i.createElement(i.Fragment,null,this.renderSearchBox(),K):K,F?i.createElement("div",{className:l("Nav-dropIndicator"),style:F}):null)},t.defaultProps={indentSize:16},(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Number]),(0,o.Sn)("design:returntype",Promise)],t.prototype,"handleClick",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Array]),(0,o.Sn)("design:returntype",Promise)],t.prototype,"handleChange",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object,Number,Boolean]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"toggleLink",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[DragEvent,String,Number]),(0,o.Sn)("design:returntype",Object)],t.prototype,"getDropInfo",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[DragEvent]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"updateDropIndicator",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleDragStart",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[DragEvent]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleDragOver",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[DragEvent]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"handleDragEnd",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[String]),(0,o.Sn)("design:returntype",Promise)],t.prototype,"handleSearch",null),t}(i.Component),g=(0,v.IWl)(f),m=(0,h.xy)({adaptor:function(e,t){var n=Array.isArray(e)?e:e.links||e.options||e.items||e.rows;if(!Array.isArray(n))throw new Error("payload.data.options is not array.");return n},afterLoad:function(e,t,n){return(0,o.sH)(void 0,void 0,void 0,(function(){var i,r,a;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return i=n.dispatchEvent,r=n.data,[4,i("loaded",(0,v.ed2)(r,{data:e.value,items:e.links}))];case 1:return(null==(a=o.sent())?void 0:a.prevented)||e.value&&!(0,v.rpn)(t,(function(e){return e.active}))&&n.env.jumpTo((0,v.pbD)(e.value,n.data),void 0,n.data),[2]}}))}))},normalizeConfig:function(e,t,n,i){if(Array.isArray(e)&&"toggle"!==i){var r=n.data,a=n.env,l=n.unfoldedField,d=n.foldedField,s=n.location,p=n.level,u=n.defaultOpenLevel,c=n.disabled,h=n.valueField,f=function(e,t){return!c&&!e.disabled&&(i&&!["location-change","data-change"].includes(i)&&void 0!==e.active?e.active:t===p&&!!(0,v.cym)(e.children||[],(function(t){return!!(t.hasOwnProperty("to")&&a&&a.isCurrentUrl((0,v.pbD)(t.to,r),e))}))||(e.activeOn?(0,v.pgu)(e.activeOn,r)||(0,v.pgu)(e.activeOn,s):!!(e.hasOwnProperty("to")&&null!==e.to&&a&&a.isCurrentUrl((0,v.pbD)(e.to,r),e))))};e=(0,v.X$u)(e,(function(e,n,i){var a,s=(0,o.Cl)((0,o.Cl)((0,o.Cl)({},e),(0,v.x_4)(e,r)),{active:f(e,i),__id:null!==(a=e.__id)&&void 0!==a?a:(0,v.OsD)()}),p=null;return!e.defer&&h&&e[h]&&(p=(0,v.cym)(t||[],(function(t){return t[h]===e[h]}))),s.unfolded=p?(0,v.Oez)(p,{unfoldedField:l,foldedField:d}):void 0!==e.unfolded?(0,v.Oez)(s,{unfoldedField:l,foldedField:d}):!!(u&&i<=u)||e.children&&!!(0,v.cym)(e.children,(function(e,t,n){return f(e,i+n)})),s}),1,!0)}return e},beforeDeferLoad:function(e,t,n){return(0,v.Z6D)(n,t,1,(0,o.Cl)((0,o.Cl)({},e),{loading:!0}))},afterDeferLoad:function(e,t,n,i,r){var a,l,d,s;return(0,o.sH)(this,void 0,void 0,(function(){var p,u,c,h,f;return(0,o.YH)(this,(function(g){switch(g.label){case 0:return p=r.dispatchEvent,u=r.data,[4,p("loaded",(0,v.ed2)(u,{data:n.data,item:(0,o.Cl)({},e)}))];case 1:return(null==(c=g.sent())?void 0:c.prevented)?[2]:(h=(0,o.Cl)((0,o.Cl)({},e),{loading:!1,loaded:!0,error:n.ok?void 0:n.msg}),f=Array.isArray(n.data)?n.data:(null===(a=n.data)||void 0===a?void 0:a.links)||(null===(l=n.data)||void 0===l?void 0:l.options)||(null===(d=n.data)||void 0===d?void 0:d.items)||(null===(s=n.data)||void 0===s?void 0:s.rows),Array.isArray(f)&&(h.children=f.concat(),h.unfolded=!0),[2,(0,v.Z6D)(i,t,1,h)])}}))}))}})(function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentKey:t.showKey||"",collapsed:t.collapsed||!1},n.toggleLink=n.toggleLink.bind(n),n.handleSelect=n.handleSelect.bind(n),n.dragUpdate=n.dragUpdate.bind(n),n.handleChange=n.handleChange.bind(n),null==t||t.onRef(n),n}return(0,o.C6)(t,e),t.prototype.componentDidMount=function(){Array.isArray(this.props.links)&&this.props.updateConfig(this.props.links,"mount")},t.prototype.componentDidUpdate=function(e,t){d()(this.props.location,e.location)?d()(this.props.links,e.links)?(0,v.JQ)(this.props.data,e.data,!1,void 0,void 0,10)&&this.props.updateConfig(this.props.config,"data-change"):this.props.updateConfig(this.props.links,"update"):this.props.updateConfig(this.props.config,"location-change"),e.defaultOpenLevel!==this.props.defaultOpenLevel&&this.props.updateConfig(this.props.config,"update"),e.collapsed!==this.props.collapsed&&this.setState({collapsed:this.props.collapsed}),t.collapsed!==this.state.collapsed&&this.props.dispatchEvent("collapsed",(0,v.ed2)(this.props.data,{collapsed:this.state.collapsed}))},t.prototype.getCurrentLink=function(e){var t=null,n=this.props,o=n.config,i=n.data,r=n.valueField,a=(0,v.GvO)(e,i,"| raw");return e&&(t=(0,v.cym)(o,(function(e){return r?e[r]===a:e.label==a||e.key==a}))),t},t.prototype.toggleLink=function(e,t,n){return(0,o.sH)(this,void 0,void 0,(function(){var t,i,r,a,l,d,s,p,u,c,h;return(0,o.YH)(this,(function(f){switch(f.label){case 0:return t=this.props,i=t.config,r=t.updateConfig,a=t.deferLoad,l=t.dispatchEvent,d=t.stacked,s=t.mode,p=t.accordion,u=t.data,c=d&&"float"!==s&&p,[4,l("toggled",(0,v.ed2)(u,{item:(0,o.Cl)({},e),open:void 0!==n?!n:!e.unfolded}))];case 1:return(null==(h=f.sent())?void 0:h.prevented)||(e.defer&&!e.loaded?a(e):r((0,v.X$u)(i,(function(t){return e.__id===t.__id?(0,o.Cl)((0,o.Cl)({},t),{unfolded:void 0!==n?!n:!t.unfolded}):(0,o.Cl)((0,o.Cl)({},t),{unfolded:c?!!(0,v.cym)(t.children||[],(function(t){return t===e})):t.unfolded})})),"toggle")),[2]}}))}))},t.prototype.dragUpdate=function(e){var t,n;return(0,o.sH)(this,void 0,void 0,(function(){var i,r,a,l,d,s;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return i=this.props.config,r=e.nodeId,a=e.dragLink,l=e.position,a&&(d=(0,v.iXH)(i,(function(e){return e.__id===a.__id})),i=(0,v.Z6D)(i,d,1),"self"===l?(0,v.X$u)(i,(function(e){return e.__id===r&&(e.children||(e.children=[]),e.children.push(a)),e})):(s=(0,v.iXH)(i,(function(e){return e.__id===r})),"bottom"===l&&s&&s.push(s.pop()+1),i=(0,v.Z6D)(i,s,0,a))),this.props.updateConfig(i,"update"),null===(n=(t=this.props).onOrderChange)||void 0===n||n.call(t,i),[4,this.saveOrder((0,v.X$u)(i,(function(e){for(var t in e)/^__.*$/.test(t)&&delete e[t];return e})))];case 1:return o.sent(),[2]}}))}))},t.prototype.saveOrder=function(e){return(0,o.sH)(this,void 0,void 0,(function(){var t,n,i,r,a;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return t=this.props,n=t.saveOrderApi,i=t.env,r=t.data,a=t.reload,n&&(0,v.Amo)(n)?[4,null==i?void 0:i.fetcher(n,(0,v.ed2)(r,{data:e}),{method:"post"})]:[3,2];case 1:return o.sent(),a(),[3,3];case 2:this.props.onOrderChange||null==i||i.alert("NAV saveOrderApi is required!"),o.label=3;case 3:return[2]}}))}))},t.prototype.expandLink=function(e){var t=this.props,n=t.config;(0,t.updateConfig)((0,v.X$u)(n,(function(t){return(0,v.cym)((null==t?void 0:t.children)||[],(function(t){return t.__id===e.__id}))?(0,o.Cl)((0,o.Cl)({},t),{expanded:!0}):(0,o.Cl)({},t)})),"expand")},t.prototype.handleChange=function(e){var t=this.props,n=t.dispatchEvent,o=t.data;setTimeout((function(){n("change",(0,v.ed2)(o,{value:e}))}))},t.prototype.handleSelect=function(e,t){return(0,o.sH)(this,void 0,void 0,(function(){var n,i,r,a,l,d,s,p,u;return(0,o.YH)(this,(function(c){switch(c.label){case 0:return n=this.props,i=n.onSelect,r=n.env,a=n.data,l=n.level,d=n.dispatchEvent,s=n.updateConfig,p=n.config,[4,d("click",(0,v.ed2)(a,{item:(0,o.Cl)({},e)}))];case 1:return(null==(u=c.sent())?void 0:u.prevented)||i&&!1===i(e)?[2]:t===l?(s((0,v.X$u)(p,(function(t){return(0,o.Cl)((0,o.Cl)({},t),{active:t.__id===e.__id})})),"select"),[2]):e.expandMore?(this.expandLink(e),[2]):e.to?(null==r||r.jumpTo((0,v.pbD)(e.to,a),e,a),[2]):[2]}}))}))},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.loading,r=e.config;e.deferLoad,e.updateConfig;var a=(0,o.Tt)(e,["disabled","loading","config","deferLoad","updateConfig"]),l=this.getCurrentLink(this.state.currentKey);return i.createElement(g,(0,o.Cl)({},a,{loading:n,links:(null==l?void 0:l.children)||r,collapsed:this.state.collapsed,disabled:t||n,onSelect:this.handleSelect,onToggle:this.toggleLink,onChange:this.handleChange,onDragUpdate:this.dragUpdate}))},t}(i.Component)),y=function(e){function t(t,n){var o=e.call(this,t)||this;return o.remoteRef=void 0,n.registerComponent(o),o}return(0,o.C6)(t,e),t.prototype.remoteConfigRef=function(e){this.remoteRef=e},t.prototype.getRef=function(e){this.navRef=e},t.prototype.componentDidUpdate=function(e){this.remoteRef&&this.props.source!==e.source&&this.remoteRef.syncConfig()},t.prototype.componentWillUnmount=function(){this.context.unRegisterComponent(this)},t.prototype.doAction=function(e,t,n,o){var i,r=null==e?void 0:e.actionType,a=(null==o?void 0:o.value)||(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.value);if("updateItems"===r){var l=this.props.valueField,d=[];if(a)if(Array.isArray(a)){if(a.length>0){var s=a.find((function(e){return e.children&&e.children.length}));if(s){var p=l?s[l]:(null==s?void 0:s.key)||(null==s?void 0:s.label);this.navRef.state.currentKey!==p&&(this.navRef.setState({currentKey:p}),d=s.children)}else this.navRef.setState({currentKey:""})}}else if("string"==typeof a&&this.navRef.state.currentKey!==a){this.navRef.setState({currentKey:a});var u=this.navRef.getCurrentLink(a);d=null==u?void 0:u.children}if(d.length>0){var c=this.props,h=c.env,f=c.data,g=(0,v.cym)(d,(function(e){return h&&h.isCurrentUrl((0,v.pbD)(e.to,f),e)}));null==h||h.jumpTo((0,v.pbD)(g?g.to:d[0].to,f),void 0,f)}}else if("collapse"===r){var m=void 0!==a?a:!this.navRef.state.collapsed;this.navRef.setState({collapsed:m})}else"reset"===r&&this.navRef.setState({currentKey:""})},t.prototype.reload=function(e,t,n){var o;if(t)return this.receive(t);var i=this.props,r=i.data;i.translate;var a=n?(0,v.ed2)(r,n):r;null===(o=this.remoteRef)||void 0===o||o.loadConfig(a)},t.prototype.receive=function(e){this.reload(void 0,void 0,e)},t.prototype.render=function(){var e=this.props,t=e.id,n=(0,o.Tt)(e,["id"]);return i.createElement(m,(0,o.Cl)({},n,{id:t||(0,v.OsD)(),onRef:this.getRef,reload:this.reload,remoteConfigRef:this.remoteConfigRef}))},t.contextType=v.MzX,(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"remoteConfigRef",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"getRef",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[String,Object,Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"reload",null),(0,o.Cg)([v.d6t,(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],t.prototype,"receive",null),(0,o.Cg)([(0,v.A49)({type:"nav",alias:["navigation"],name:"nav"}),(0,o.Sn)("design:paramtypes",[Object,Object])],t)}(i.Component)}}]);